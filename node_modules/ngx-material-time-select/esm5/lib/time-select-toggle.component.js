/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Attribute, ChangeDetectionStrategy, ChangeDetectorRef, Component, ContentChild, Directive, HostBinding, HostListener, Input, ViewChild, ViewEncapsulation } from '@angular/core';
import { coerceBooleanProperty } from '@angular/cdk/coercion';
import { MatButton } from '@angular/material';
import { merge, of, Subscription } from 'rxjs';
import { MatTimeSelectIntl } from './time-select-intl.service';
import { MatTimeSelectComponent } from './time-select.component';
/**
 * Can be used to override the icon of a `matTimeSelectToggle`.
 */
var MatTimeSelectToggleIconDirective = /** @class */ (function () {
    function MatTimeSelectToggleIconDirective() {
    }
    MatTimeSelectToggleIconDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[matTimeSelectToggleIcon]'
                },] }
    ];
    return MatTimeSelectToggleIconDirective;
}());
export { MatTimeSelectToggleIconDirective };
/**
 * @template D
 */
var MatTimeSelectToggleComponent = /** @class */ (function () {
    function MatTimeSelectToggleComponent(_intl, _changeDetectorRef, defaultTabIndex) {
        this._intl = _intl;
        this._changeDetectorRef = _changeDetectorRef;
        this._stateChanges = Subscription.EMPTY;
        /** @type {?} */
        var parsedTabIndex = parseInt(defaultTabIndex, 10);
        this.tabIndex = (parsedTabIndex || parsedTabIndex === 0) ? parsedTabIndex : null;
    }
    Object.defineProperty(MatTimeSelectToggleComponent.prototype, "disabled", {
        /** Whether the toggle button is disabled. */
        get: /**
         * Whether the toggle button is disabled.
         * @return {?}
         */
        function () {
            return this._disabled === undefined ? this.timeSelect.disabled : this._disabled;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._disabled = coerceBooleanProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatTimeSelectToggleComponent.prototype, "disableRipple", {
        /** Whether ripples on the toggle should be disabled. */
        get: /**
         * Whether ripples on the toggle should be disabled.
         * @return {?}
         */
        function () {
            return this._disableRipple;
        },
        set: /**
         * @param {?} value
         * @return {?}
         */
        function (value) {
            this._disableRipple = coerceBooleanProperty(value);
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatTimeSelectToggleComponent.prototype, "class", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () { return 'mat-time-select-toggle'; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatTimeSelectToggleComponent.prototype, "tabindex", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () { return '-1'; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatTimeSelectToggleComponent.prototype, "active", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () { return this.timeSelect && this.timeSelect.opened; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatTimeSelectToggleComponent.prototype, "accent", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () { return this.timeSelect && this.timeSelect.color === 'accent'; },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(MatTimeSelectToggleComponent.prototype, "warn", {
        /** @docs-private */
        get: /**
         * \@docs-private
         * @return {?}
         */
        function () { return this.timeSelect && this.timeSelect.color === 'warn'; },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    MatTimeSelectToggleComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        this._watchStateChanges();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    MatTimeSelectToggleComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.timeSelect) {
            this._watchStateChanges();
        }
    };
    /**
     * @return {?}
     */
    MatTimeSelectToggleComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this._stateChanges.unsubscribe();
    };
    /** Handle focus event. */
    /**
     * Handle focus event.
     * @return {?}
     */
    MatTimeSelectToggleComponent.prototype.onFocus = /**
     * Handle focus event.
     * @return {?}
     */
    function () {
        this.button.focus();
    };
    /**
     * Open the time select.
     * @param event The triggered event to open the time select.
     */
    /**
     * Open the time select.
     * @param {?} event The triggered event to open the time select.
     * @return {?}
     */
    MatTimeSelectToggleComponent.prototype.open = /**
     * Open the time select.
     * @param {?} event The triggered event to open the time select.
     * @return {?}
     */
    function (event) {
        if (this.timeSelect && !this.disabled) {
            this.timeSelect.open();
            event.stopPropagation();
        }
    };
    /**
     * @private
     * @return {?}
     */
    MatTimeSelectToggleComponent.prototype._watchStateChanges = /**
     * @private
     * @return {?}
     */
    function () {
        var _this = this;
        /** @type {?} */
        var timeSelectDisabled = this.timeSelect ? this.timeSelect.disabledChange : of();
        /** @type {?} */
        var inputDisabled = this.timeSelect && this.timeSelect._timeSelectInput ?
            this.timeSelect._timeSelectInput.disabledChange : of();
        /** @type {?} */
        var timeSelectToggled = this.timeSelect ?
            merge(this.timeSelect.openStream, this.timeSelect.closeStream) :
            of();
        this._stateChanges.unsubscribe();
        this._stateChanges = merge(this._intl.changes, timeSelectDisabled, inputDisabled, timeSelectToggled).subscribe(function () { return _this._changeDetectorRef.markForCheck(); });
    };
    MatTimeSelectToggleComponent.decorators = [
        { type: Component, args: [{
                    selector: 'mat-time-select-toggle',
                    template: "<button\r\n  #button\r\n  mat-icon-button\r\n  type=\"button\"\r\n  aria-haspopup=\"true\"\r\n  [attr.aria-label]=\"_intl.openTimeSelectLabel\"\r\n  [attr.tabindex]=\"disabled ? -1 : tabIndex\"\r\n  [disabled]=\"disabled\"\r\n  [disableRipple]=\"disableRipple\"\r\n  (click)=\"open($event)\">\r\n\r\n  <svg\r\n    *ngIf=\"!customIcon\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n    class=\"mat-time-select-toggle-default-icon\"\r\n    viewBox=\"0 0 24 24\"\r\n    width=\"24px\"\r\n    height=\"24px\"\r\n    fill=\"currentColor\"\r\n    focusable=\"false\">\r\n    <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z\"/>\r\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n    <path d=\"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z\"/>\r\n  </svg>\r\n\r\n  <ng-content select=\"[matTimeSelectToggleIcon]\"></ng-content>\r\n</button>\r\n",
                    exportAs: 'matTimeSelectToggle',
                    encapsulation: ViewEncapsulation.None,
                    changeDetection: ChangeDetectionStrategy.OnPush,
                    styles: [".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-time-select-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-time-select-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-time-select-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-time-select-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-time-select-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-time-select-toggle-default-icon{margin:auto}"]
                }] }
    ];
    /** @nocollapse */
    MatTimeSelectToggleComponent.ctorParameters = function () { return [
        { type: MatTimeSelectIntl },
        { type: ChangeDetectorRef },
        { type: String, decorators: [{ type: Attribute, args: ['tabindex',] }] }
    ]; };
    MatTimeSelectToggleComponent.propDecorators = {
        timeSelect: [{ type: Input, args: ['for',] }],
        tabIndex: [{ type: Input }],
        customIcon: [{ type: ContentChild, args: [MatTimeSelectToggleIconDirective,] }],
        button: [{ type: ViewChild, args: ['button',] }],
        disabled: [{ type: Input }],
        disableRipple: [{ type: Input }],
        class: [{ type: HostBinding, args: ['class',] }],
        tabindex: [{ type: HostBinding, args: ['attr.tabindex',] }],
        active: [{ type: HostBinding, args: ['class.mat-time-select-toggle-active',] }],
        accent: [{ type: HostBinding, args: ['class.mat-accent',] }],
        warn: [{ type: HostBinding, args: ['class.mat-warn',] }],
        onFocus: [{ type: HostListener, args: ['focus',] }]
    };
    return MatTimeSelectToggleComponent;
}());
export { MatTimeSelectToggleComponent };
if (false) {
    /**
     * @type {?}
     * @private
     */
    MatTimeSelectToggleComponent.prototype._stateChanges;
    /**
     * @type {?}
     * @private
     */
    MatTimeSelectToggleComponent.prototype._disabled;
    /**
     * @type {?}
     * @private
     */
    MatTimeSelectToggleComponent.prototype._disableRipple;
    /**
     * Time select instance that the button will toggle.
     * @type {?}
     */
    MatTimeSelectToggleComponent.prototype.timeSelect;
    /**
     * Tabindex for the toggle.
     * @type {?}
     */
    MatTimeSelectToggleComponent.prototype.tabIndex;
    /**
     * Custom icon set by the consumer.
     * @type {?}
     */
    MatTimeSelectToggleComponent.prototype.customIcon;
    /**
     * Underlying button element.
     * @type {?}
     */
    MatTimeSelectToggleComponent.prototype.button;
    /** @type {?} */
    MatTimeSelectToggleComponent.prototype._intl;
    /**
     * @type {?}
     * @private
     */
    MatTimeSelectToggleComponent.prototype._changeDetectorRef;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1zZWxlY3QtdG9nZ2xlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25neC1tYXRlcmlhbC10aW1lLXNlbGVjdC8iLCJzb3VyY2VzIjpbImxpYi90aW1lLXNlbGVjdC10b2dnbGUuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBRUwsU0FBUyxFQUNULHVCQUF1QixFQUN2QixpQkFBaUIsRUFDakIsU0FBUyxFQUNULFlBQVksRUFDWixTQUFTLEVBQ1QsV0FBVyxFQUNYLFlBQVksRUFDWixLQUFLLEVBSUwsU0FBUyxFQUNULGlCQUFpQixFQUNsQixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUMscUJBQXFCLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUM1RCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDNUMsT0FBTyxFQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsWUFBWSxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQzdDLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLDRCQUE0QixDQUFDO0FBQzdELE9BQU8sRUFBQyxzQkFBc0IsRUFBQyxNQUFNLHlCQUF5QixDQUFDOzs7O0FBRy9EO0lBQUE7SUFHK0MsQ0FBQzs7Z0JBSC9DLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsMkJBQTJCO2lCQUN0Qzs7SUFDOEMsdUNBQUM7Q0FBQSxBQUhoRCxJQUdnRDtTQUFuQyxnQ0FBZ0M7Ozs7QUFFN0M7SUErREUsc0NBQW1CLEtBQXdCLEVBQ3ZCLGtCQUFxQyxFQUN0QixlQUF1QjtRQUZ2QyxVQUFLLEdBQUwsS0FBSyxDQUFtQjtRQUN2Qix1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW1CO1FBdERqRCxrQkFBYSxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUM7O1lBd0RuQyxjQUFjLEdBQUcsUUFBUSxDQUFDLGVBQWUsRUFBRSxFQUFFLENBQUM7UUFDcEQsSUFBSSxDQUFDLFFBQVEsR0FBRyxDQUFDLGNBQWMsSUFBSSxjQUFjLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ25GLENBQUM7SUExQ0Qsc0JBQ0ksa0RBQVE7UUFGWiw2Q0FBNkM7Ozs7O1FBQzdDO1lBRUUsT0FBTyxJQUFJLENBQUMsU0FBUyxLQUFLLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDbEYsQ0FBQzs7Ozs7UUFDRCxVQUFhLEtBQWM7WUFDekIsSUFBSSxDQUFDLFNBQVMsR0FBRyxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoRCxDQUFDOzs7T0FIQTtJQU1ELHNCQUNJLHVEQUFhO1FBRmpCLHdEQUF3RDs7Ozs7UUFDeEQ7WUFFRSxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDN0IsQ0FBQzs7Ozs7UUFDRCxVQUFrQixLQUFjO1lBQzlCLElBQUksQ0FBQyxjQUFjLEdBQUcscUJBQXFCLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDckQsQ0FBQzs7O09BSEE7SUFNRCxzQkFDSSwrQ0FBSztRQUZULG9CQUFvQjs7Ozs7UUFDcEIsY0FDc0IsT0FBTyx3QkFBd0IsQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBR3hELHNCQUNJLGtEQUFRO1FBRlosb0JBQW9COzs7OztRQUNwQixjQUN5QixPQUFPLElBQUksQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBR3ZDLHNCQUNJLGdEQUFNO1FBRlYsb0JBQW9COzs7OztRQUNwQixjQUN3QixPQUFPLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDOzs7T0FBQTtJQUczRSxzQkFDSSxnREFBTTtRQUZWLG9CQUFvQjs7Ozs7UUFDcEIsY0FDd0IsT0FBTyxJQUFJLENBQUMsVUFBVSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUM7OztPQUFBO0lBR3ZGLHNCQUNJLDhDQUFJO1FBRlIsb0JBQW9COzs7OztRQUNwQixjQUNzQixPQUFPLElBQUksQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQzs7O09BQUE7Ozs7SUFTbkYseURBQWtCOzs7SUFBbEI7UUFDRSxJQUFJLENBQUMsa0JBQWtCLEVBQUUsQ0FBQztJQUM1QixDQUFDOzs7OztJQUVELGtEQUFXOzs7O0lBQVgsVUFBWSxPQUFzQjtRQUNoQyxJQUFJLE9BQU8sQ0FBQyxVQUFVLEVBQUU7WUFDdEIsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7U0FDM0I7SUFDSCxDQUFDOzs7O0lBRUQsa0RBQVc7OztJQUFYO1FBQ0UsSUFBSSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztJQUNuQyxDQUFDO0lBRUQsMEJBQTBCOzs7OztJQUUxQiw4Q0FBTzs7OztJQURQO1FBRUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN0QixDQUFDO0lBRUQ7OztPQUdHOzs7Ozs7SUFDSCwyQ0FBSTs7Ozs7SUFBSixVQUFLLEtBQVk7UUFDZixJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ3JDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDdkIsS0FBSyxDQUFDLGVBQWUsRUFBRSxDQUFDO1NBQ3pCO0lBQ0gsQ0FBQzs7Ozs7SUFFTyx5REFBa0I7Ozs7SUFBMUI7UUFBQSxpQkFlQzs7WUFkTyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFOztZQUM1RSxhQUFhLEdBQUcsSUFBSSxDQUFDLFVBQVUsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLGdCQUFnQixDQUFDLENBQUM7WUFDekUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxnQkFBZ0IsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRTs7WUFDbEQsaUJBQWlCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ3pDLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7WUFDaEUsRUFBRSxFQUFFO1FBRU4sSUFBSSxDQUFDLGFBQWEsQ0FBQyxXQUFXLEVBQUUsQ0FBQztRQUNqQyxJQUFJLENBQUMsYUFBYSxHQUFHLEtBQUssQ0FDeEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQ2xCLGtCQUFrQixFQUNsQixhQUFhLEVBQ2IsaUJBQWlCLENBQ2xCLENBQUMsU0FBUyxDQUFDLGNBQU0sT0FBQSxLQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxFQUFFLEVBQXRDLENBQXNDLENBQUMsQ0FBQztJQUM1RCxDQUFDOztnQkFwSEYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSx3QkFBd0I7b0JBQ2xDLHc3QkFBa0Q7b0JBRWxELFFBQVEsRUFBRSxxQkFBcUI7b0JBQy9CLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJO29CQUNyQyxlQUFlLEVBQUUsdUJBQXVCLENBQUMsTUFBTTs7aUJBQ2hEOzs7O2dCQWhCTyxpQkFBaUI7Z0JBaEJ2QixpQkFBaUI7NkNBMEZKLFNBQVMsU0FBQyxVQUFVOzs7NkJBakRoQyxLQUFLLFNBQUMsS0FBSzsyQkFFWCxLQUFLOzZCQUdMLFlBQVksU0FBQyxnQ0FBZ0M7eUJBRTdDLFNBQVMsU0FBQyxRQUFROzJCQUdsQixLQUFLO2dDQVNMLEtBQUs7d0JBU0wsV0FBVyxTQUFDLE9BQU87MkJBSW5CLFdBQVcsU0FBQyxlQUFlO3lCQUkzQixXQUFXLFNBQUMscUNBQXFDO3lCQUlqRCxXQUFXLFNBQUMsa0JBQWtCO3VCQUk5QixXQUFXLFNBQUMsZ0JBQWdCOzBCQXlCNUIsWUFBWSxTQUFDLE9BQU87O0lBaUN2QixtQ0FBQztDQUFBLEFBdEhELElBc0hDO1NBOUdZLDRCQUE0Qjs7Ozs7O0lBRXZDLHFEQUEyQzs7Ozs7SUFFM0MsaURBQTJCOzs7OztJQUMzQixzREFBZ0M7Ozs7O0lBR2hDLGtEQUFvRDs7Ozs7SUFFcEQsZ0RBQWlDOzs7OztJQUdqQyxrREFBNkY7Ozs7O0lBRTdGLDhDQUF1Qzs7SUF3QzNCLDZDQUErQjs7Ozs7SUFDL0IsMERBQTZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBBZnRlckNvbnRlbnRJbml0LFxyXG4gIEF0dHJpYnV0ZSxcclxuICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSxcclxuICBDaGFuZ2VEZXRlY3RvclJlZixcclxuICBDb21wb25lbnQsXHJcbiAgQ29udGVudENoaWxkLFxyXG4gIERpcmVjdGl2ZSxcclxuICBIb3N0QmluZGluZyxcclxuICBIb3N0TGlzdGVuZXIsXHJcbiAgSW5wdXQsXHJcbiAgT25DaGFuZ2VzLFxyXG4gIE9uRGVzdHJveSxcclxuICBTaW1wbGVDaGFuZ2VzLFxyXG4gIFZpZXdDaGlsZCxcclxuICBWaWV3RW5jYXBzdWxhdGlvblxyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge2NvZXJjZUJvb2xlYW5Qcm9wZXJ0eX0gZnJvbSAnQGFuZ3VsYXIvY2RrL2NvZXJjaW9uJztcclxuaW1wb3J0IHtNYXRCdXR0b259IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcclxuaW1wb3J0IHttZXJnZSwgb2YsIFN1YnNjcmlwdGlvbn0gZnJvbSAncnhqcyc7XHJcbmltcG9ydCB7TWF0VGltZVNlbGVjdEludGx9IGZyb20gJy4vdGltZS1zZWxlY3QtaW50bC5zZXJ2aWNlJztcclxuaW1wb3J0IHtNYXRUaW1lU2VsZWN0Q29tcG9uZW50fSBmcm9tICcuL3RpbWUtc2VsZWN0LmNvbXBvbmVudCc7XHJcblxyXG4vKiogQ2FuIGJlIHVzZWQgdG8gb3ZlcnJpZGUgdGhlIGljb24gb2YgYSBgbWF0VGltZVNlbGVjdFRvZ2dsZWAuICovXHJcbkBEaXJlY3RpdmUoe1xyXG4gIHNlbGVjdG9yOiAnW21hdFRpbWVTZWxlY3RUb2dnbGVJY29uXSdcclxufSlcclxuZXhwb3J0IGNsYXNzIE1hdFRpbWVTZWxlY3RUb2dnbGVJY29uRGlyZWN0aXZlIHt9XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICBzZWxlY3RvcjogJ21hdC10aW1lLXNlbGVjdC10b2dnbGUnLFxyXG4gIHRlbXBsYXRlVXJsOiAnLi90aW1lLXNlbGVjdC10b2dnbGUuY29tcG9uZW50Lmh0bWwnLFxyXG4gIHN0eWxlVXJsczogWycuL3RpbWUtc2VsZWN0LXRvZ2dsZS5jb21wb25lbnQuc2NzcyddLFxyXG4gIGV4cG9ydEFzOiAnbWF0VGltZVNlbGVjdFRvZ2dsZScsXHJcbiAgZW5jYXBzdWxhdGlvbjogVmlld0VuY2Fwc3VsYXRpb24uTm9uZSxcclxuICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxyXG59KVxyXG5leHBvcnQgY2xhc3MgTWF0VGltZVNlbGVjdFRvZ2dsZUNvbXBvbmVudDxEPiBpbXBsZW1lbnRzIEFmdGVyQ29udGVudEluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcclxuXHJcbiAgcHJpdmF0ZSBfc3RhdGVDaGFuZ2VzID0gU3Vic2NyaXB0aW9uLkVNUFRZO1xyXG5cclxuICBwcml2YXRlIF9kaXNhYmxlZDogYm9vbGVhbjtcclxuICBwcml2YXRlIF9kaXNhYmxlUmlwcGxlOiBib29sZWFuO1xyXG5cclxuICAvKiogVGltZSBzZWxlY3QgaW5zdGFuY2UgdGhhdCB0aGUgYnV0dG9uIHdpbGwgdG9nZ2xlLiAqL1xyXG4gIEBJbnB1dCgnZm9yJykgdGltZVNlbGVjdDogTWF0VGltZVNlbGVjdENvbXBvbmVudDxEPjtcclxuICAvKiogVGFiaW5kZXggZm9yIHRoZSB0b2dnbGUuICovXHJcbiAgQElucHV0KCkgdGFiSW5kZXg6IG51bWJlciB8IG51bGw7XHJcblxyXG4gIC8qKiBDdXN0b20gaWNvbiBzZXQgYnkgdGhlIGNvbnN1bWVyLiAqL1xyXG4gIEBDb250ZW50Q2hpbGQoTWF0VGltZVNlbGVjdFRvZ2dsZUljb25EaXJlY3RpdmUpIGN1c3RvbUljb246IE1hdFRpbWVTZWxlY3RUb2dnbGVJY29uRGlyZWN0aXZlO1xyXG4gIC8qKiBVbmRlcmx5aW5nIGJ1dHRvbiBlbGVtZW50LiAqL1xyXG4gIEBWaWV3Q2hpbGQoJ2J1dHRvbicpIGJ1dHRvbjogTWF0QnV0dG9uO1xyXG5cclxuICAvKiogV2hldGhlciB0aGUgdG9nZ2xlIGJ1dHRvbiBpcyBkaXNhYmxlZC4gKi9cclxuICBASW5wdXQoKVxyXG4gIGdldCBkaXNhYmxlZCgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZCA9PT0gdW5kZWZpbmVkID8gdGhpcy50aW1lU2VsZWN0LmRpc2FibGVkIDogdGhpcy5fZGlzYWJsZWQ7XHJcbiAgfVxyXG4gIHNldCBkaXNhYmxlZCh2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5fZGlzYWJsZWQgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkodmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgLyoqIFdoZXRoZXIgcmlwcGxlcyBvbiB0aGUgdG9nZ2xlIHNob3VsZCBiZSBkaXNhYmxlZC4gKi9cclxuICBASW5wdXQoKVxyXG4gIGdldCBkaXNhYmxlUmlwcGxlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVSaXBwbGU7XHJcbiAgfVxyXG4gIHNldCBkaXNhYmxlUmlwcGxlKHZhbHVlOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9kaXNhYmxlUmlwcGxlID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcycpXHJcbiAgZ2V0IGNsYXNzKCk6IHN0cmluZyB7IHJldHVybiAnbWF0LXRpbWUtc2VsZWN0LXRvZ2dsZSc7IH1cclxuXHJcbiAgLyoqIEBkb2NzLXByaXZhdGUgKi9cclxuICBASG9zdEJpbmRpbmcoJ2F0dHIudGFiaW5kZXgnKVxyXG4gIGdldCB0YWJpbmRleCgpOiBzdHJpbmcgeyByZXR1cm4gJy0xJzsgfVxyXG5cclxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MubWF0LXRpbWUtc2VsZWN0LXRvZ2dsZS1hY3RpdmUnKVxyXG4gIGdldCBhY3RpdmUoKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnRpbWVTZWxlY3QgJiYgdGhpcy50aW1lU2VsZWN0Lm9wZW5lZDsgfVxyXG5cclxuICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xyXG4gIEBIb3N0QmluZGluZygnY2xhc3MubWF0LWFjY2VudCcpXHJcbiAgZ2V0IGFjY2VudCgpOiBib29sZWFuIHsgcmV0dXJuIHRoaXMudGltZVNlbGVjdCAmJiB0aGlzLnRpbWVTZWxlY3QuY29sb3IgPT09ICdhY2NlbnQnOyB9XHJcblxyXG4gIC8qKiBAZG9jcy1wcml2YXRlICovXHJcbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5tYXQtd2FybicpXHJcbiAgZ2V0IHdhcm4oKTogYm9vbGVhbiB7IHJldHVybiB0aGlzLnRpbWVTZWxlY3QgJiYgdGhpcy50aW1lU2VsZWN0LmNvbG9yID09PSAnd2Fybic7IH1cclxuXHJcbiAgY29uc3RydWN0b3IocHVibGljIF9pbnRsOiBNYXRUaW1lU2VsZWN0SW50bCxcclxuICAgICAgICAgICAgICBwcml2YXRlIF9jaGFuZ2VEZXRlY3RvclJlZjogQ2hhbmdlRGV0ZWN0b3JSZWYsXHJcbiAgICAgICAgICAgICAgQEF0dHJpYnV0ZSgndGFiaW5kZXgnKSBkZWZhdWx0VGFiSW5kZXg6IHN0cmluZykge1xyXG4gICAgY29uc3QgcGFyc2VkVGFiSW5kZXggPSBwYXJzZUludChkZWZhdWx0VGFiSW5kZXgsIDEwKTtcclxuICAgIHRoaXMudGFiSW5kZXggPSAocGFyc2VkVGFiSW5kZXggfHwgcGFyc2VkVGFiSW5kZXggPT09IDApID8gcGFyc2VkVGFiSW5kZXggOiBudWxsO1xyXG4gIH1cclxuXHJcbiAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xyXG4gICAgdGhpcy5fd2F0Y2hTdGF0ZUNoYW5nZXMoKTtcclxuICB9XHJcblxyXG4gIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcclxuICAgIGlmIChjaGFuZ2VzLnRpbWVTZWxlY3QpIHtcclxuICAgICAgdGhpcy5fd2F0Y2hTdGF0ZUNoYW5nZXMoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nT25EZXN0cm95KCkge1xyXG4gICAgdGhpcy5fc3RhdGVDaGFuZ2VzLnVuc3Vic2NyaWJlKCk7XHJcbiAgfVxyXG5cclxuICAvKiogSGFuZGxlIGZvY3VzIGV2ZW50LiAqL1xyXG4gIEBIb3N0TGlzdGVuZXIoJ2ZvY3VzJylcclxuICBvbkZvY3VzKCkge1xyXG4gICAgdGhpcy5idXR0b24uZm9jdXMoKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIE9wZW4gdGhlIHRpbWUgc2VsZWN0LlxyXG4gICAqIEBwYXJhbSBldmVudCBUaGUgdHJpZ2dlcmVkIGV2ZW50IHRvIG9wZW4gdGhlIHRpbWUgc2VsZWN0LlxyXG4gICAqL1xyXG4gIG9wZW4oZXZlbnQ6IEV2ZW50KTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy50aW1lU2VsZWN0ICYmICF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgIHRoaXMudGltZVNlbGVjdC5vcGVuKCk7XHJcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBfd2F0Y2hTdGF0ZUNoYW5nZXMoKSB7XHJcbiAgICBjb25zdCB0aW1lU2VsZWN0RGlzYWJsZWQgPSB0aGlzLnRpbWVTZWxlY3QgPyB0aGlzLnRpbWVTZWxlY3QuZGlzYWJsZWRDaGFuZ2UgOiBvZigpO1xyXG4gICAgY29uc3QgaW5wdXREaXNhYmxlZCA9IHRoaXMudGltZVNlbGVjdCAmJiB0aGlzLnRpbWVTZWxlY3QuX3RpbWVTZWxlY3RJbnB1dCA/XHJcbiAgICAgIHRoaXMudGltZVNlbGVjdC5fdGltZVNlbGVjdElucHV0LmRpc2FibGVkQ2hhbmdlIDogb2YoKTtcclxuICAgIGNvbnN0IHRpbWVTZWxlY3RUb2dnbGVkID0gdGhpcy50aW1lU2VsZWN0ID9cclxuICAgICAgbWVyZ2UodGhpcy50aW1lU2VsZWN0Lm9wZW5TdHJlYW0sIHRoaXMudGltZVNlbGVjdC5jbG9zZVN0cmVhbSkgOlxyXG4gICAgICBvZigpO1xyXG5cclxuICAgIHRoaXMuX3N0YXRlQ2hhbmdlcy51bnN1YnNjcmliZSgpO1xyXG4gICAgdGhpcy5fc3RhdGVDaGFuZ2VzID0gbWVyZ2UoXHJcbiAgICAgIHRoaXMuX2ludGwuY2hhbmdlcyxcclxuICAgICAgdGltZVNlbGVjdERpc2FibGVkLFxyXG4gICAgICBpbnB1dERpc2FibGVkLFxyXG4gICAgICB0aW1lU2VsZWN0VG9nZ2xlZFxyXG4gICAgKS5zdWJzY3JpYmUoKCkgPT4gdGhpcy5fY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCkpO1xyXG4gIH1cclxuXHJcbn1cclxuIl19